<!DOCTYPE html>
<!-- saved from url=(0053)https://getbootstrap.com/docs/4.1/examples/dashboard/ -->
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <meta name="description" content=""/>
    <meta name="author" content=""/>

    <title>會員帳號管理</title>
    <link href="../static/css/bootstrap-jie.css" rel="stylesheet"/>
    <link href="../static/css/bootstrap-table.css" rel="stylesheet">
    <!-- Custom styles for this tmemberlate -->
    <link href="../static/css/bootstrap-table.css" rel="stylesheet">

    <!-- Bootstrap Core CSS -->
    <link href="../static/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- MetisMenu CSS -->
    <link href="../static/vendor/metisMenu/metisMenu.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="../static/dist/css/sb-admin-2.css" rel="stylesheet">
    <!-- Custom Fonts -->
    <link href="../static/vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <!-- Custom Fonts -->
    <link href="../static/vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->


    <!-- Moment.js v2.20.0 -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.0/moment.min.js"></script>
    <script src="../static/js/jquery-3.3.1.min.js" crossorigin="anonymous"></script>
    <script th:src="@{/js/alertBox.js}" src="/js/alertBox.js"></script>
    <style>
        input[type=checkbox] {
            -ms-transform: scale(1.5); /* IE */
            -moz-transform: scale(1.5); /* FireFox */
            -webkit-transform: scale(1.5); /* Safari and Chrome */
            -o-transform: scale(1.5); /* Opera */
        }
    </style>

</head>

<body th:inline="text">

<!--引入topbar-->
<div id="wrapper">

    <div th:replace="common/bar2"></div>
    <!------->
    <div id="page-wrapper">
        <div class="row">
            <br>
            <form style="padding-left: 1%">
                <div class="form-row align-items-center" style="display:inline-flex">
                    <div class="col-auto">
                        <button type="button" class="btn btn-success btn-md" data-toggle="modal" data-target="#myModal">
                            新增會員
                        </button>
                        <!-- Modal -->
                        <div class="modal fade" id="myModal" role="dialog">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content container-fluid">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                        <h4 class="modal-title">Regist for an account</h4>
                                    </div>
                                    <form id='myForm' method="post" class="needs-validation" novalidate>
                                        <div class="modal-body">
                                            <div class="col-md mb-0">
                                                <label for="newName">請輸入姓名:</label>
                                                <input id='newName' name="newName" type="text"
                                                       placeholder="請輸入姓名:"
                                                       onkeyup="isName();"
                                                       required>
                                                <img src="/img/cross_icon.png" style="display: none" id="nameCross"
                                                     width="20" height="20">
                                                <img src="/img/icon-check.png" style="display: none" id="nameCheck"
                                                     width="20" height="20">
                                            </div>
                                            <div class="col-md mb-0">
                                                <label for="newAccount">請輸入帳號:</label>
                                                <input id='newAccount' name="newAccount" type="text"
                                                       placeholder="請輸入帳號:"
                                                       onkeyup="isAccount();checkAccount();"
                                                       required>
                                                <img src="/img/cross_icon.png" style="display: none" id="accountCross"
                                                     width="20" height="20">
                                                <img src="/img/icon-check.png" style="display: none" id="accountCheck"
                                                     width="20" height="20">
                                            </div>
                                            <div class="col-md mb-0">
                                                <label for="newPassword">請輸入密碼:</label>
                                                <input id='newPassword' name="newPassword" type="text"
                                                       placeholder="請輸入密碼:"
                                                       onkeyup="isPassword();"
                                                       required>
                                                <img src="/img/cross_icon.png" style="display: none" id="passCross"
                                                     width="20" height="20">
                                                <img src="/img/icon-check.png" style="display: none" id="passCheck"
                                                     width="20" height="20">
                                            </div>
                                            <div class="col-md mb-0">
                                                <label for="cfmPassword">請再次輸入密碼:</label>
                                                <input id='cfmPassword' name="cfmPassword" type="text"
                                                       placeholder="請再次輸入密碼:"
                                                       onkeyup="checkPassword();"
                                                       required>
                                                <img src="/img/cross_icon.png" style="display: none" id="pass2Cross"
                                                     width="20" height="20">
                                                <img src="/img/icon-check.png" style="display: none" id="pass2Check"
                                                     width="20" height="20">
                                            </div>
                                            <div class="form-row">
                                                <div>
                                                    <label for="depName">請選擇部門</label>
                                                    <select class="form-control selector" name="depName" id="depName">

                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="submit" class="btn btn-default">確定</button>
                                            <button type="button" class="btn btn-default" data-dismiss="modal">取消
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>


                    </div>
                    &nbsp
                    <div class="col-auto">
                        <button type="button" class="btn btn-danger mb-2" onclick="verifySelect(2)">刪除會員</button>
                    </div>
                </div>
            </form>
            <br>

            <div class="table-responsive">
                <table class="table table-bordered table-striped">
                    <thead>
                    <!--<tr class="table table-striped table-sm">-->
                    <tr class="table table-striped table-sm" align="center">
                        <th class="text-center">操作</th>
                        <th class="text-center">帳號</th>
                        <th class="text-center">名字</th>
                        <th class="text-center">密碼</th>
                        <th class="text-center" colspan="3">部門</th>
                    </tr>
                    </thead>


                    <tbody id="list-itens">

                    <tr th:each="member:${members}">
                        <td align="center">
                            <div style="padding-left: 6%">
                                <input type="checkbox" class="form-check-input" name="id[]" value="" id="id[]"
                                       th:value="${member.id}"/>
                            </div>

                            <!--  <a href="#" th:href="@{/member/}+${member.id}" class="btn btn-sm btn-primary">修改</a> -->
                            <!--   <div class="btn btn-sm btn-danger deleteBtn" data-toggle="modal"
                            th:onclick="'javascript:sendDeleteMember(\''+${members.id}+'\')'">
                            刪除
                            </div> -->
                        </td>

                        <td th:text="${member.account}" style="vertical-align: center;">1</td>
                        <td th:text="${member.name}" style="vertical-align: center;">1</td>
                        <td align="center" th:text="${member.password}" style="vertical-align: center;">1</td>
                        <td th:text="${member.depName}" style="vertical-align: center;">1</td>


                    </tr>

                    <!--<tr id="loadMemberData" onload="loadMemberData()">-->

                    <!--</tr>-->


                    </tbody>
                </table>
            </div>
            <!--pagination-->
            <div th:replace="common/pagination::pagination"></div>
            <!--</main>-->
        </div>
    </div>
</div>


<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script th:src="@{/js/jquery-3.3.1.min.js}" src="/js/jquery-3.3.1.min.js" crossorigin="anonymous"></script>
<script src="/js/popper.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<!-- Icons -->
<script src="../static/js/bootstrap-datetimepicker.min.js"></script>
<script src="../static/js/bootstrap-datetimepicker.js"></script>
<script src="../static/js/bootstrap-datetimepicker.zh-TW.js"></script>

<script>
    function changePageSize() {
        var page = '1' // 修改每頁幾筆自動回第一頁
        var pageSize = $('#pageSize').val();
        var queryForm = $("#queryForm");

        window.location.href = "/verifyChangePage?pageSize=" + pageSize + "&page=" + page;
    }

    function changePage(page) {
        var pageSize = $('#pageSize').val();
        window.location.href = "/verifyChangePage?pageSize=" + pageSize + "&page=" + page;
    }

    function verifySelect(flag) {
        //alert(1);
        var Checkbox = false;
        $("input[name='id[]']").each(function () {
            if (this.checked == true) {
                Checkbox = true;
            }
        });
        if (Checkbox) {
            if (flag == 1) {
                var confirmMsg;
                confirmMsg = "確認審核通過選中的內容嗎？"
            } else if (flag == 2) {
                confirmMsg = "確認審核不通過選中的內容嗎？"
            }
            var t = confirm(confirmMsg);
            if (t == false) {
                return false;
            } else {
                var checkedID = "";
                if (flag == 1) {
                    checkedID = "1,";
                } else if (flag == 2) {
                    checkedID = "2,";
                }
                $("input[name='id[]']").each(function () {
                    if (this.checked == true) {
                        checkedID += this.value + ",";
                        console.log(checkedID);
                    }
                });
                $.ajax({
                    url: "verify/execute",
                    async: true,
                    contentType: 'application/json; charset=UTF-8',
                    type: "PUT",
                    data: checkedID,
                    success: function (data) {
                        alertSuccess('審核完成')
                        var pageSizeVal = $('#pageSize').val();
                        var locate = "/verifyChangePage?pageSize=" + pageSize + "&page=1";
                        console.log(locate);
                        //setTimeout("window.location.href=\"/verifyChangePage?pageSize=\" + pageSizeVal + \"&page=1\" ", 1000);
                        setTimeout("window.location.href='/verifyChangePage?pageSize=" + pageSizeVal + "'", 1000);

                    },
                    error: function (err) {
                        console.log(err)
                    }
                });
            }
        } else {
            alertWarning('尚未選擇報名資料！')
            return false;
        }

    }

    $(document).ready(function () {
        $("#CheckAll").click(function () {
            if ($("#CheckAll").prop("checked")) {//如果全選按鈕有被選擇的話（被選擇是true）
                $("input[name='id[]']").prop("checked", true);//把所有的核取方框的property都變成勾選
            } else {
                $("input[name='id[]']").prop("checked", false);//把所有的核取方框的property都取消勾選
            }
        })
    })

</script>

<!--&lt;!&ndash; Icons &ndash;&gt;-->
<!--<script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script>-->
<!--<script>-->
<!--feather.replace()-->
<!--</script>-->

<!-- jQuery -->
<script src="../static/vendor/jquery/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="../static/vendor/bootstrap/js/bootstrap.min.js"></script>

<!-- Metis Menu Plugin JavaScript -->
<script src="../static/vendor/metisMenu/metisMenu.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="../static/dist/js/sb-admin-2.js"></script>

<!-- Page-Level Demo Scripts - Notifications - Use for reference -->
<script>
    // tooltip demo
    $('.tooltip-demo').tooltip({
        selector: "[data-toggle=tooltip]",
        container: "body"
    })
    // popover demo
    $("[data-toggle=popover]")
        .popover()
</script>
<!-- Icons -->
<script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script>
<script>
    feather.replace()
</script>

<script>
    function confirmPass() {
        $('#myModal').modal('hide');

        setTimeout("window.location.href='/members'", 1000);
    }
</script>

<!--functions in popout  -->
<script>
    function isName() {
        var name_element = document.getElementById("newName");
        var name = name_element.value;
        document.getElementById("nameCheck").style.display = "none";
        if (name != "aaa01") {
            document.getElementById("nameCross").style = "";
        } else {
            document.getElementById("nameCross").style.display = "none";
            document.getElementById("nameCheck").style = "";
        }
    }

    function isAccount() {
        var account_element = document.getElementById("newAccount");
        var account = account_element.value;
        //should be correct formation
        document.getElementById("accountCheck").style.display = "none";
        if (account != "aaa01") {
            document.getElementById("accountCross").style = "";
        } else {
            document.getElementById("accountCross").style.display = "none";
            document.getElementById("accountCheck").style = "";
        }
    }

    function checkAccount() {
        //check no overlapping account
    }

    function isPassword() {
        var password_element = document.getElementById("newPassword");
        var password = password_element.value;
        //should be correct formation and length
        document.getElementById("passCheck").style.display = "none";
        if (password != "123") {
            document.getElementById("passCross").style = "";
        } else {
            document.getElementById("passCross").style.display = "none";
            document.getElementById("passCheck").style = "";
        }
    }

    function checkPassword() {
        var password1_element = document.getElementById("newPassword");
        var password1 = password1_element.value;
        var password2_element = document.getElementById("cfmPassword");
        var password2 = password2_element.value;

        document.getElementById("pass2Check").style.display = "none";
        if (password1 != password2) {
            document.getElementById("pass2Cross").style = "";
        } else {
            document.getElementById("pass2Cross").style.display = "none";
            document.getElementById("pass2Check").style = "";
        }
    }

</script>


<script>

    // Example starter JavaScript for disabling form submissions if there are invalid fields
    (function () {
        'use strict';
        window.addEventListener('load', function () {
            // Fetch all the forms we want to apply custom Bootstrap validation styles to
            var forms = document.getElementsByClassName('needs-validation');
            // Loop over them and prevent submission
            var validation = Array.prototype.filter.call(forms, function (form) {
                form.addEventListener('submit', function (event) {
                    if (form.checkValidity() === false) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        }, false);
    })();
</script>

<!--<script>-->
<!--function loadMemberData() {-->
<!--// var groupNum = $("#groupNum").val();-->
<!--// var sessionsId = $("#sessionsId").val();-->
<!--// var applicantPhone = $("#applicantPhone").val();-->
<!--// var preorderDate = $("#preorderDate").val();-->

<!--$.ajax({-->
<!--contentType: 'application/json; charset=UTF-8',-->
<!--type: "post",-->
<!--data: JSON.stringify({-->
<!--"account": account,-->
<!--"name": name,-->
<!--"password": password,-->
<!--"department_id": department_id-->
<!--}),-->
<!--url: "/member",-->
<!--success: function (data) {-->
<!--var str = "";-->
<!--console.log(data);-->
<!--str += '<td align="center"><div style="padding-left: 6%"><input type="checkbox" class="form-check-input" name="'-->
<!--+ value.id + ' value="' + value.id + '" id="' + value.id + '/></div></td>';-->
<!--$.each(data, function (index, value) {-->
<!--str += "<td>" + value.account + "</td>"-->
<!--+ "<td>" + value.name + "</td>"-->
<!--+ "<td>" + value.password + "</td>"-->
<!--+ "<td>" + value.department_id + "</td>";-->
<!--});-->
<!--$("#loadMemberData").empty();-->
<!--$("#loadMemberData").append(" ");-->
<!--$("#loadMemberData").append(str);-->
<!--},-->
<!--error: function (jqXHR, exception) {-->
<!--ajaxError(jqXHR, exception);-->
<!--$("#loadMemberData").empty();-->
<!--},-->
<!--});-->
<!--}-->
<!--</script>-->

</body>
</html>

